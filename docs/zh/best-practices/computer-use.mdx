---
title: Computer Use 代理
description: 在 Stagehand 中仅用一行代码集成 Anthropic 和 OpenAI 的 Computer Use API。
---

## 什么是 Computer Use Agent？

<iframe
  width="100%"
  height="400"
  src="https://www.youtube.com/embed/ODaHJzOyVCQ"
  title="YouTube video player"
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
></iframe>
你可能听说过 [Claude Computer Use](https://www.anthropic.com/news/3-5-models-and-computer-use) 或 [OpenAI 的 Computer Using Agent](https://openai.com/index/computer-using-agent/)。

它们是强大的工具，能够把自然语言转化为计算机上的具体操作。但如果没有额外支持，你需要自己编写代码，将这些操作转换为 Playwright 命令。

Stagehand 不仅负责执行 Computer Use 的输出，还支持你仅用一行代码在 OpenAI 与 Anthropic 的模型之间无缝切换。

## 如何在 Stagehand 中使用 Computer Use Agent

在 Stagehand 中，使用 Computer Use Agent 只需一行代码：

<Note>
**重要：请配置浏览器窗口尺寸**

Computer Use Agent 常会返回屏幕点击用的 XY 坐标，因此需要预先配置浏览器窗口尺寸。

若未指定，默认尺寸为 1024x768。你也可以在 `browserbaseSessionCreateParams` 或 `localBrowserLaunchOptions` 选项中进行配置。
</Note>


### 配置浏览器窗口尺寸

不同运行环境的浏览器配置方式不同：

<Tabs>
<Tab title="BROWSERBASE">
<CodeGroup>  
```typescript TypeScript
import { Stagehand } from "@browserbasehq/stagehand";

const stagehand = new Stagehand({
	env: "BROWSERBASE",
  	apiKey: process.env.BROWSERBASE_API_KEY /* 用于认证的 API key */,
    projectId: process.env.BROWSERBASE_PROJECT_ID /* 项目标识符 */,
  
    browserbaseSessionCreateParams: {
      projectId: process.env.BROWSERBASE_PROJECT_ID!,
      browserSettings: {
		blockAds: true,
        viewport: {
          width: 1024,
          height: 768,
        },
      },
  	},
});

await stagehand.init();
```
```python Python
import os
from stagehand import Stagehand, StagehandConfig

stagehand = Stagehand(StagehandConfig(
    env="BROWSERBASE",
    api_key=os.getenv("BROWSERBASE_API_KEY"),  # 用于认证的 API key
    project_id=os.getenv("BROWSERBASE_PROJECT_ID"),  # 项目标识符
    
    browserbase_session_create_params={
        "projectId": os.getenv("BROWSERBASE_PROJECT_ID"),
        "browserSettings": {
            "blockAds": True,
            "viewport": {
                "width": 1024,
                "height": 768,
            },
        },
    },
))

await stagehand.init()
```
</CodeGroup>
</Tab>
<Tab title="LOCAL">
<CodeGroup>
```typescript TypeScript
import { Stagehand } from "@browserbasehq/stagehand";

const stagehand = new Stagehand({
  env: "LOCAL",
  localBrowserLaunchOptions: {
    headless: false,
    viewport: {
      width: 1024,
      height: 768,
    },
  }
});

await stagehand.init();
```
```python Python
from stagehand import Stagehand, StagehandConfig

stagehand = Stagehand(StagehandConfig(
    env="LOCAL",
    local_browser_launch_options={
        "headless": False,
        "viewport": {
            "width": 1024,
            "height": 768,
        },
    }
))

await stagehand.init()
```
</CodeGroup>
</Tab>
</Tabs>

### 指挥你的 Computer Use Agent

在代理上调用 `execute` 来分配任务。

<CodeGroup>
```typescript TypeScript
// 访问网站
await stagehand.page.goto("https://www.google.com");

const agent = stagehand.agent({
	// 你可以使用 OpenAI 或 Anthropic
	provider: "anthropic",
	// 要使用的模型（OpenAI 使用 computer-use-preview）
	model: "claude-sonnet-4-20250514",

	// 自定义系统提示
	instructions: `You are a helpful assistant that can use a web browser.
	Do not ask follow up questions, the user will trust your judgement.`,

	// 自定义 API key
	options: {
		apiKey: process.env.ANTHROPIC_API_KEY,
	},
});

// 执行代理
await agent.execute("Apply for a library card at the San Francisco Public Library");
```

```python Python
import os

# 访问网站
await stagehand.page.goto("https://www.google.com")

agent = stagehand.agent({
    # 要使用的模型
    model="computer-use-preview",

    # 自定义系统提示
    instructions="You are a helpful assistant that can use a web browser. Do not ask follow up questions, the user will trust your judgement.",

    # 自定义 API key
    options={
        "apiKey": os.getenv("ANTHROPIC_API_KEY"),
    },
})

# 执行代理
await agent.execute("Apply for a library card at the San Francisco Public Library")
```
</CodeGroup>

你也可以设置代理可执行的最大步数：

<CodeGroup>
```typescript TypeScript
await agent.execute({
	instructions: "Apply for a library card at the San Francisco Public Library",
	maxSteps: 10,
});
```

```python Python
await agent.execute(
	"Apply for a library card at the San Francisco Public Library",
	max_steps=10,
)
```
</CodeGroup> 