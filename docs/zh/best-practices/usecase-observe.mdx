---
sidebarTitle: 使用案例
---

## 真实场景用例

### 电商商品发现

```typescript
// 发现商品的可交互元素
const productActions = await page.observe({
  instruction: "Find add to cart buttons, size selectors, and product images"
});

// 按类型对动作进行分类
const cartButtons = productActions.filter(a => 
  a.description.toLowerCase().includes('cart')
);
const sizeOptions = productActions.filter(a => 
  a.description.toLowerCase().includes('size')
);

// 执行购买流程
if (sizeOptions.length > 0) {
  await page.act(sizeOptions[0]); // 先选择尺码
}
if (cartButtons.length > 0) {
  await page.act(cartButtons[0]); // 再加入购物车
}
```

### 表单处理与校验

```typescript
// 填写前先分析表单结构
const formElements = await page.observe({
  instruction: "Find form fields, validation messages, and submit buttons"
});

// 检查必填字段
const requiredFields = formElements.filter(e => 
  e.description.includes('required') || e.description.includes('*')
);

console.log(`Found ${requiredFields.length} required fields to complete`);

// 系统化填写表单
for (const field of requiredFields) {
  await page.act(field);
  // 根据字段类型填写合适的输入
}
```

### 动态内容与 SPA 导航

```typescript
// 等待并发现动态加载的内容
await page.waitForLoadState('networkidle');

const dynamicElements = await page.observe({
  instruction: "Find newly loaded content, infinite scroll triggers, or loading indicators",
  domSettleTimeoutMs: 15000 // 为动态内容适当延长等待时间
});

// 处理无限滚动
const scrollTriggers = dynamicElements.filter(e => 
  e.description.toLowerCase().includes('load more') ||
  e.description.toLowerCase().includes('scroll')
);

if (scrollTriggers.length > 0) {
  await page.act(scrollTriggers[0]);
  // 递归观察新内容
  const newContent = await page.observe("Find additional items");
}
```

### 多步工作流规划

```typescript
// 预先规划整个结账流程
async function planCheckoutWorkflow() {
  // 步骤 1：购物车页分析
  await page.goto('/cart');
  const cartActions = await page.observe("Find checkout and cart modification options");
  
  // 步骤 2：结账页分析
  const checkoutButton = cartActions.find(a => a.description.includes('checkout'));
  if (checkoutButton) await page.act(checkoutButton);
  
  const checkoutActions = await page.observe("Find payment forms and shipping options");
  
  // 步骤 3：规划执行顺序
  const shippingFields = checkoutActions.filter(a => a.description.includes('shipping'));
  const paymentFields = checkoutActions.filter(a => a.description.includes('payment'));
  const submitButton = checkoutActions.find(a => a.description.includes('complete order'));
  
  return { shippingFields, paymentFields, submitButton };
}

// 执行规划的工作流
const workflow = await planCheckoutWorkflow();
// 填写顺序：配送 → 支付 → 提交
```
