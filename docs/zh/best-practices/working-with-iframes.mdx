---
title: 使用 iframes
---

### 什么是 iframe？

Iframes 会在当前页面中嵌入其他页面。网站会用它们来放置同意横幅、支付组件、聊天气泡以及第三方内容。
iframe 内的元素存在于与主页面分离的上下文中。

### 启用 iframe 支持

在你的 `act()`、`observe()` 和 `extract()` 命令中设置 `iframes: true`。

<CodeGroup>
  ```typescript TypeScript
  // 在 iframes 中执行操作
  await page.act({ action: "click the accept cookies button", iframes: true });

  // 在 iframes 中观察
  const results = await page.observe({
    instruction: "Find the primary action button",
    iframes: true,
  });

  // 从 iframes 中提取
  const data = await page.extract({
    instruction: "Extract the product price from the payment widget",
    schema: z.object({
      price: z.string(),
    }),
    iframes: true,
  });
  ```

  ```python Python
  # 在 iframes 中执行操作
  await page.act(
      "click the accept cookies button",
      iframes=True
  )

  # 在 iframes 中观察
  results = await page.observe({
      "instruction": "Find the primary action button",
      "iframes": True,
  })

  # 从 iframes 中提取
  data = await page.extract({
      "instruction": "Extract the product price from the payment widget",
      "schema": {
          "type": "object",
          "properties": {
              "price": {"type": "string"}
          }
      },
      "iframes": True,
  })
  ```
</CodeGroup>

### 提示

- Iframes 可能会增加处理时间。为获得最佳性能，仅在必要时启用该选项。
- 当不确定某个元素是否位于 iframe 中时，可以在 Stagehand 日志中查看是否存在 iframes。
- 如果某个元素偶尔无法找到，可能在延迟加载的 iframe 中。可在步骤间添加短暂等待，或重试该操作。

<Note>
  你可以通过 Stagehand 配置启用实验性功能（如 Shadow DOM 支持）。参见[配置指南](/zh/configuration/browser)。
</Note>

## 下一步

<CardGroup cols={2}>
  <Card title="使用 observe() 分析页面" icon="magnifying-glass" iconType="sharp-solid" href="/zh/basics/observe">
    在执行前使用 `observe()` 规划精确的单步动作。
  </Card>

  <Card title="使用 extract() 提取数据" icon="table" iconType="sharp-solid" href="/zh/basics/extract">
    搭配数据模式使用 `extract()`，从任意页面提取干净、带类型的数据。
  </Card>

  <Card title="动作缓存" icon="bolt" iconType="sharp-solid" href="/zh/best-practices/caching">
    通过缓存动作，加速重复的自动化流程。
  </Card>

  <Card title="act() 基础" icon="arrow-pointer" iconType="sharp-solid" href="/zh/basics/act">
    学习如何使用 `act()` 可靠地执行单步动作。
  </Card>
</CardGroup>