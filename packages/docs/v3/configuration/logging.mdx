---
title: Logging & Debugging
sidebarTitle: Logging
description: Set up logging, debugging, and error tracking for Stagehand workflows
---

Stagehand provides comprehensive logging capabilities to help you debug automation workflows, track execution, and diagnose issues. Configure logging levels, structured output, and debugging tools for both development and production environments.

## Logging Configuration

```typescript
import { Stagehand } from "@browserbasehq/stagehand";

const stagehand = new Stagehand({
  env: "BROWSERBASE", // or "LOCAL"
  verbose: 1, // 0 = errors only, 1 = info, 2 = debug
});
```

### Verbose Levels

- **Level 0**: Errors only - minimal output for production
- **Level 1**: Info - includes successful operations and important events
- **Level 2**: Debug - comprehensive logging including internal operations

## Structured Logging

### Log Line Format

Each log entry contains structured information:

```typescript
interface LogLine {
  id?: string;
  category?: string;
  message: string;
  level?: 0 | 1 | 2; // 0 = error, 1 = info, 2 = debug
  timestamp?: string;
  auxiliary?: {
    [key: string]: {
      value: string;
      type: "object" | "string" | "html" | "integer" | "float" | "boolean";
    };
  };
}
```

### Custom Logger

```typescript
class AdvancedLogger {
  private logFile?: string;
  
  constructor(logFile?: string) {
    this.logFile = logFile;
  }
  
  log = (logLine: any) => {
    const timestamp = new Date().toISOString();
    const colors = {
      browser: '\x1b[34m', // blue
      action: '\x1b[32m',  // green
      llm: '\x1b[35m',     // magenta
      error: '\x1b[31m',   // red
      stagehand: '\x1b[36m', // cyan
      cache: '\x1b[33m',   // yellow
    };
    
    const color = colors[logLine.category] || '\x1b[0m';
    const reset = '\x1b[0m';
    
    // Console output with colors
    console.log(`${color}[${logLine.category}]${reset} ${logLine.message}`);
    
    // Log execution time if available
    if (logLine.auxiliary?.executionTime) {
      console.log(` ${logLine.auxiliary.executionTime.value}${logLine.auxiliary.executionTime.unit}`);
    }
    
    // Log additional context
    if (logLine.auxiliary && Object.keys(logLine.auxiliary).length > 0) {
      console.log('  Context:', JSON.stringify(logLine.auxiliary, null, 2));
    }
    
    // File logging (optional)
    if (this.logFile) {
      const logEntry = {
        timestamp,
        ...logLine
      };
      require('fs').appendFileSync(this.logFile, JSON.stringify(logEntry) + '\n');
    }
  }
}

// Usage
const logger = new AdvancedLogger('./automation.log');
const stagehand = new Stagehand({
  env: "BROWSERBASE",
  verbose: 2,
  logger: logger.log
});
```

## Detailed Logging Features

### LLM Inference Logging

Enable detailed logging of all LLM interactions:

```typescript
const stagehand = new Stagehand({
  env: "BROWSERBASE",
  logInferenceToFile: true,  // Creates inference_summary/ directory
  verbose: 2
});
```

The `inference_summary/` directory structure:
```
inference_summary/                   
├── act_summary/            
│   ├── 20240329_080446068.json    
│   ├── 20240329_080447019.json   
│   └── act_summary.json          
├── extract_summary/               
│   ├── 20240329_081205123.json    
│   └── extract_summary.json       
└── observe_summary/                
    ├── 20240329_081634891.json    
    └── observe_summary.json       
```

## Log Analysis & Debugging

### Common Log Patterns
<Tabs>
  <Tab title="Successful Action">
    ```json
    {
      "category": "action", 
      "message": "act completed successfully",
      "level": 1,
      "auxiliary": {
        "executionTime": {"value": "1250", "unit": "ms"},
        "url": "https://example.com",
        "sessionId": "session-123"
      }
    }
    ```
  </Tab>
  <Tab title="LLM Inference">
    ```json
    {
      "category": "llm",
      "message": "inference completed", 
      "level": 1,
      "auxiliary": {
        "model": "gpt-4o",
        "tokens": {"prompt": 3451, "completion": 45},
        "executionTime": {"value": "951", "unit": "ms"}
      }
    }
    ```
  </Tab>
  <Tab title="Error Example">
    ```json
    {
      "category": "action",
      "message": "action failed: element not found",
      "level": 0, 
      "auxiliary": {
        "selector": "button[data-testid='submit']",
        "url": "https://example.com/form",
        "sessionId": "session-123"
      }
    }
    ```
  </Tab>
</Tabs>

## Best Practices

<AccordionGroup>
<Accordion title="Development Environment">
- Use `verbose: 2` with visual debugging
- Enable browser DevTools for element inspection
- Use `logInferenceToFile: true` to capture LLM decisions
- Implement structured logging early
</Accordion>

<Accordion title="Production Environment">
- Use `verbose: 1` to balance visibility with performance
- Implement error tracking and alerting
- Use structured JSON logging
- Monitor session success rates and execution times
</Accordion>

<Accordion title="Security & Compliance">
- Never log credentials or sensitive data
- Implement log retention policies
- Secure log files and dashboards
</Accordion>
</AccordionGroup>